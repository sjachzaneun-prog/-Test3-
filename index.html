<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>War! 1v1 Local</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; background: #121212; color: white; margin: 0; display: flex; flex-direction: column; align-items: center; height: 100vh; overflow: hidden;}
        .setup-bar { background: #222; width: 100%; padding: 10px; text-align: center; border-bottom: 2px solid #444; }
        
        .game-world { display: flex; width: 100%; height: 100%; }
        
        /* Player Zones */
        .player-zone { flex: 1; display: flex; flex-direction: column; align-items: center; justify-content: center; transition: 0.3s; padding: 20px; }
        .p1-zone { background: #1a2a3a; border-right: 1px solid #333; }
        .p2-zone { background: #3a1a1a; border-left: 1px solid #333; }
        
        /* Card Text Display */
        .card-slot { width: 120px; height: 180px; border: 3px dashed #555; border-radius: 10px; display: flex; align-items: center; justify-content: center; font-size: 40px; margin: 20px 0; background: rgba(0,0,0,0.2); }
        .card-active { border-style: solid; border-color: #fff; background: #fff; color: #000; }

        .btn-draw { padding: 15px 30px; font-size: 18px; cursor: pointer; border-radius: 8px; border: none; font-weight: bold; transition: 0.2s; }
        .p1-btn { background: #2196F3; color: white; }
        .p2-btn { background: #f44336; color: white; }
        .btn-draw:disabled { background: #444; color: #888; cursor: not-allowed; }

        #middle-display { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); text-align: center; pointer-events: none; width: 300px; }
        .status-msg { background: rgba(0,0,0,0.8); padding: 15px; border-radius: 10px; border: 1px solid #fff; font-size: 18px; }
        .war-flash { color: #ffeb3b; font-weight: bold; font-size: 24px; }
    </style>
</head>
<body>

<div class="setup-bar">
    <strong>WAR: 1v1 LOCAL</strong> | 
    <label><input type="checkbox" id="jokerToggle"> Include Jokers</label> | 
    <button onclick="setupGame()">NEW GAME (Rigged Aces)</button>
    <div id="war-count">Wars: 0</div>
</div>

<div class="game-world">
    <div class="player-zone p1-zone">
        <h2>PLAYER 1</h2>
        <div id="p1-cards-left">Cards: 0</div>
        <div id="p1-slot" class="card-slot">?</div>
        <button id="p1-draw" class="btn-draw p1-btn" onclick="playerReady(1)" disabled>READY</button>
    </div>

    <div class="player-zone p2-zone">
        <h2>PLAYER 2</h2>
        <div id="p2-cards-left">Cards: 0</div>
        <div id="p2-slot" class="card-slot">?</div>
        <button id="p2-draw" class="btn-draw p2-btn" onclick="playerReady(2)" disabled>READY</button>
    </div>
</div>

<div id="middle-display">
    <div id="status" class="status-msg">Press New Game to Start!</div>
</div>

<script>
    let p1Hand = [], p2Hand = [];
    let p1Current = null, p2Current = null;
    let warCount = 0;

    function setupGame() {
        const suits = ['â™ ', 'â™¥', 'â™¦', 'â™£'];
        const ranks = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
        const values = [2,3,4,5,6,7,8,9,10,11,12,13,14];
        
        let deck = [];
        suits.forEach(s => {
            ranks.forEach((r, i) => deck.push({name: r+s, val: values[i]}));
        });

        let aces = deck.filter(c => c.name.includes('A'));
        let others = deck.filter(c => !c.name.includes('A'));

        if(document.getElementById('jokerToggle').checked) {
            others.push({name: 'JKðŸƒ', val: 15}, {name: 'JKðŸƒ', val: 15});
        }

        others.sort(() => Math.random() - 0.5);

        // Distribute: 2 Aces each + half of the rest
        let mid = Math.floor(others.length / 2);
        p1Hand = [...aces.slice(0, 2), ...others.slice(0, mid)].sort(() => Math.random() - 0.5);
        p2Hand = [...aces.slice(2, 4), ...others.slice(mid)].sort(() => Math.random() - 0.5);

        warCount = 0;
        resetRound();
        updateUI("Both Players Ready!");
        enableButtons(true);
    }

    function playerReady(num) {
        if(num === 1) {
            p1Current = p1Hand.shift();
            document.getElementById('p1-draw').disabled = true;
            document.getElementById('p1-slot').innerText = "âœ”";
        } else {
            p2Current = p2Hand.shift();
            document.getElementById('p2-draw').disabled = true;
            document.getElementById('p2-slot').innerText = "âœ”";
        }

        if(p1Current && p2Current) {
            setTimeout(resolveRound, 500);
        }
    }

    function resolveRound() {
        const s1 = document.getElementById('p1-slot');
        const s2 = document.getElementById('p2-slot');
        
        s1.innerText = p1Current.name;
        s1.classList.add('card-active');
        s2.innerText = p2Current.name;
        s2.classList.add('card-active');

        let msg = "";
        if(p1Current.val > p2Current.val) {
            p1Hand.push(p1Current, p2Current);
            msg = "Player 1 Wins!";
        } else if(p2Current.val > p1Current.val) {
            p2Hand.push(p1Current, p2Current);
            msg = "Player 2 Wins!";
        } else {
            warCount++;
            p1Hand.push(p1Current);
            p2Hand.push(p2Current);
            msg = "<span class='war-flash'>WAR! (TIE)</span>";
        }

        updateUI(msg);
        
        setTimeout(() => {
            if(!checkGameOver()) {
                resetRound();
            }
        }, 1500);
    }

    function resetRound() {
        p1Current = null;
        p2Current = null;
        document.getElementById('p1-slot').innerText = "?";
        document.getElementById('p2-slot').innerText = "?";
        document.getElementById('p1-slot').classList.remove('card-active');
        document.getElementById('p2-slot').classList.remove('card-active');
        enableButtons(true);
        updateUI("Waiting for both players...");
    }

    function enableButtons(state) {
        document.getElementById('p1-draw').disabled = !state;
        document.getElementById('p2-draw').disabled = !state;
    }

    function updateUI(msg) {
        document.getElementById('status').innerHTML = msg;
        document.getElementById('p1-cards-left').innerText = `Cards: ${p1Hand.length}`;
        document.getElementById('p2-cards-left').innerText = `Cards: ${p2Hand.length}`;
        document.getElementById('war-count').innerText = `Wars: ${warCount}`;
    }

    function checkGameOver() {
        if(p1Hand.length === 0 || p2Hand.length === 0) {
            let winner = p1Hand.length > 0 ? "PLAYER 1" : "PLAYER 2";
            updateUI(`GAME OVER<br>${winner} IS THE VICTOR!`);
            enableButtons(false);
            return true;
        }
        return false;
    }
</script>
</body>
</html>


